# 컴퓨터 시스템의 각 부분에서 얼마큼 지연이 일어날까?

컴퓨터 시스템의 여러 가지 주요 작업에서 발생하는지연 시간이 줄어들어 점점 더 속도가 빨라지고 있다.

- 최신 CPU 내부에서는 일반적으로 파이프라인 방식으로 기계 명령어를 처리하는 방식을 채택하고 있다.
- if 판단 구문에 대응하는 기계 명령어가 없다면 다음 명령어가 바로 파이트라인에 들어간다.
- 이때 CPU는 반드시 if 구문이 참인지 여부를 추측해야 한다.
- 추측에 실패할 경우 일부 명령어가 무효화된다.

### 디스크 처리 시간

디스크가 처리하는 시간은 SSD보다 20배, 메모리보다 80배 오래 걸리고,<br />
SSD는 메모리보다 네 배 더 오래 걸린다.

디스크를 임으로 읽을 때 디스크 탐색이 발생할 가능성이 높으므로<br />
많은 고성능 데이터베이스는 추가 방식(순차 기록 방식)을 채택해 디스크에 데이트를 기록한다.

<br />
<br />

## 1) 시간 지표로 환산

### 컴퓨터 세계의 0.5ns를 1초로 환산한다면?

- L1캐시의 접근 지연이 1초라고 가정한다면, 메모리 접근 지연은 최대 3분이다.
- 1MB 데이터를 읽는다고 가정한다면 아래와 같은 시간이 걸린다.
  - 메모리: 5일
  - SSD: 20일
  - 디스크: 최대 1년
- 컴퓨터를 다시 시작하는 데 걸리는 시간이 2분이라고 가정한다면 2분은 5600년에 해당한다.

> CPU가 보기에 컴퓨터 재시작은 이 정도로 느리다.

<br />
<br />

## 2) 거리 지표로 환산

0.5ns를 1m로 가정해보자.

| 작업 항목                          | 지연 시간 비유 | 비유 거리 (현실 세계) |
| ---------------------------------- | -------------- | --------------------- |
| L1 캐시 접근                       | 집안 → 문 앞   | 1m                    |
| 메모리 접근                        | 집 → 편의점    | 200m                  |
| 메모리에서 1MB 데이터 읽기         | 서울 → 제주도  | 500km                 |
| 데이터센터 내부 네트워크 왕복 시간 | 서울 → 일본    | 1000km                |
| SSD에서 1MB 데이터 읽기            | 서울 → 홍콩    | 2000km                |
| 디스크(HDD)에서 1MB 데이터 읽기    | 지구 한 바퀴   | 4만 km                |
| 미국 → 네덜란드 간 네트워크 왕복   | 지구 → 달      | 30만 km               |
| 컴퓨터 재시작 시간                 | 지구 → 화성    | 2억 4000만 km         |

<br />
<br />
