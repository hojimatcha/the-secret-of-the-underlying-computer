# 파일을 읽을 때 프로그램에는 어떤 일이 발생할까?

코드로 입출력을 수행하는 것은 매우 흔한 일입니다. 그렇다면 메모리 관점에서의 입출력은 어떨까요?

## 6.3.1 메모리 관점에서 입출력

메모리 관점에서 입출력은 단순한 메모리의 복사압니다. 그리고 복사된 메모리가 어디에 저장됨에 따라서 입력과 출력이 구분됩니다.

복사 데이터가 내부 장치에 저장된다면 그것이 바로 **입력이며**, 반대로 외부 장치에 저장된다면 그게 바로 **출력입니다.**

즉, 메모리와 외부 장치 사이에서 복사 데이터가 왔다 갔다 하는 것이 입출력입니다.

## 6.3.2 read 함수는 어떻게 파일을 읽는 것일까?

일반적으로 메모리를 읽고 쓰는 속도는 CPU가 명령어를 처리하는 속도보다 느립니다.
다시 말해서, 병목 현상이 생기기 딱 좋은 구간이 바로 입출력이 발생하는 곳입니다.

그래서 운영체제는 입출력 블로킹 대기열과 준비 완료 대기열이라는 것을 이용해서 리소스를 최적화합니다.

먼저, 프로세스 A를 통해서 디스크를 복사한다고 가정해봅시다.

이때 CPU는 read 함수를 통해 할당된 buffer에 디스크에 존재하는 정보를 복사하려고 하지만 너무 느리기 때문에 해당 프로세스를 입출력 블로킹 대기열에 올립니다.
그러고는 준비 완료 대기열에 있는 다른 프로세스(프로세스 B)를 꺼내서 실행합니다.

> 이렇게 되면 입출력동안 발생하는 비효울성을 해결할 수 있습니다.

이후 buffer에 디스크 정보 복사가 완료되면 디스크는 CPU한테 신호를 보내며 프로세스 A는 입출력 블로킹 대기열에서 준비 완료 대기열로 배정됩니다.
이때 CPU는 진행중이던 프로세스 B를 계속 실행시킬 수 있으며 혹은 프로세스 A를 바로 실행시킬 수 도 있습니다.

> 무엇이 먼저 진행될지는 정확하게 알지 못하겠네요..
