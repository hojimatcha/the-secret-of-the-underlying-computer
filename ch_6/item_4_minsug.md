# 6.4 높은 동시성의 비결: 입출력 다중화

프로그래밍 세계에서 모든 입출력은 파일과 연관되어있습니다. 왜냐하면 파일 읽기와 쓰기로 입출력을 모두 구현할 수 있기 때문이지요.
이때 프로그래머는 추상화를 통해서 입출력을 구체화합니다.

## 6.4.1 파일 서술자

바로 이전 챕터에서 파일은 버퍼에서 데이터를 읽는 것이라고 했습니다. 그렇다면 어디에서 데이터를 읽는 것일까요?

이건 파일 서술자로 설명됩니다. 파일 서술자는 숫자에 불과하며 이 숫자는 마치 번호표와 같아서 프로세스는 단순히 이 번호를 보고
읽기와 쓰기를 실행합니다.

## 6.4.2 다중 입출력을 어떻게 효율적으로 처리하는 것일까?

높은 동시성이란 개념이 있습니다. 서버가 많은 사용자 요청을 동시에 처리하는 것을 의미합니다.

서버는 어떻게 수 천개 이상의 요청을 그토록 빠르게 처리할 수 있을까요? 여기에 높은 동시성이 개념이 요구됩니다.

높은 동시성을 가능하게 하는 방법 중 하나인 다중 스레드가 있지만 이는 실제로 서버에서 사용되지는 않습니다. 왜냐하면 스레드 수가 너무 많아질 수 도 있고 리소스가 과도하게 사용될 수 있기 때문이죠.
그러면 어떻게 높은 동시성을 가질 수 있을까요?

## 6.4.3 상대방이 아닌 내가 전화하게 만들기

가끔씩 영업 사원들이 저희에게 스팸 전화를 걸 때가 있는데 이를 막는 방법 중 하나는 우리가 먼저 영업 사원에게 전화하는 것입니다.

> 실제로는 그런 일이 없겠지만 이렇게 한다면 전화는 오지 않겠네요.

위 예시에서 우리는 커널에 해당하고, 영업 사원은 응용 프로그램 그리고 전화번호는 파일 서술자에 해당합니다.
많은 양의 입출력은 응용프로그램이 아닌 커널이 주체가 되어 응용프로그램에게 통지하는 것으로 해결될 수 있습니다.
이 방법을 입출력 다중화라고 부릅니다.

## 6.4.4 입출력 다중화

입출력 다중화는 다음과 같은 과정을 거칩니다.

1. 파일 서술자를 획득합니다. 이때 서술자 종류는 상관 없습니다.
2. 특정 함수를 호출하여 커널에 알립니다.
3. 해당 함수가 반환되면 읽고 쓸 수 있는 조건이 준비된 파일 서술자를 획득할 수 있습니다.
